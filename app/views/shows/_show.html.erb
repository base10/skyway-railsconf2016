<% cache [ show ] do %>
  <article id="<%= dom_id(show) %>">
    <header>
      <h2><%= link_to show.when, show %></h2>
      <%= render show.venue %>
    </header>

    <% show.setlists.each do |setlist| %>
      <p class="setlist">
        <span><%= setlist.name %></span>:
        <%= format_setlist(show, setlist) %>
      </p>
    <% end %>

    <% if show.unknown_setlist? %>
      <p class="unknown">
        Setlist unavailable for this show.
      </p>
    <% end %>

    <% if show.notes? %>
      <p>
        <span>Notes:</span>
        <br />
        <% show.notes.each_with_index do |note| %>
          <sup><%= show.bookmark_for(note) %></sup> <%= note %>
          <br />
        <% end %>
      </p>
    <% end %>

    <hr/>
  </article>
<% end %>
